<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partial/head %>
    <style>
        .no-border {
            border: 0;
            box-shadow: none;
            background-color: white !important;
        }
    </style>
</head>

<body>
    <!-- Main navbar -->
    <div class="navbar navbar-expand-md navbar-dark">
        <div class="navbar-brand">
            <a href="index.html" class="d-inline-block">
                <img src="/global_assets/images/logo_light.png" alt="">
            </a>
        </div>

        <div class="d-md-none">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-mobile">
                <i class="icon-tree5"></i>
            </button>
            <button class="navbar-toggler sidebar-mobile-main-toggle" type="button">
                <i class="icon-paragraph-justify3"></i>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="navbar-mobile">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="#" class="navbar-nav-link sidebar-control sidebar-main-toggle d-none d-md-block">
                        <i class="icon-paragraph-justify3"></i>
                    </a>
                </li>
            </ul>

            <span class="navbar-text ml-md-3 mr-md-auto">
                <span class="badge bg-success">Online</span>
            </span>

            <ul class="navbar-nav">
                <li class="nav-item dropdown dropdown-user">
                    <a href="#" class="navbar-nav-link dropdown-toggle" data-toggle="dropdown">
                        <img src="/global_assets/images/placeholders/placeholder.jpg" class="rounded-circle" alt="">
                        <span><%= name %></span>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right">
                        <form action="/authentication/logout" method="POST">
                            <button class="dropdown-item"><i class="icon-switch2"></i> Logout</button>
                        </form>
                        <!-- <a href="/login" class="dropdown-item"><i class="icon-switch2"></i> Logout</a> -->
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- /main navbar -->

    <!-- Page content -->
    <div class="page-content">

        <!-- Main sidebar -->
        <div class="sidebar sidebar-dark sidebar-main sidebar-expand-md">

            <!-- Sidebar mobile toggler -->
            <div class="sidebar-mobile-toggler text-center">
                <a href="#" class="sidebar-mobile-main-toggle">
                    <i class="icon-arrow-left8"></i>
                </a>
                Navigation
                <a href="#" class="sidebar-mobile-expand">
                    <i class="icon-screen-full"></i>
                    <i class="icon-screen-normal"></i>
                </a>
            </div>
            <!-- /sidebar mobile toggler -->

            <!-- sidebar -->
            <% include ../partial/sidebar %>
            <!-- end sidebar -->

        </div>
        <!-- /main sidebar -->

        <!-- Main content -->
        <div class="content-wrapper">
            <!-- Page header -->
            <div class="page-header page-header-light">
                <div class="page-header-content header-elements-md-inline">
                    <div class="page-title d-flex">
                        <h4><i class="icon-arrow-left52 mr-2"></i> <span class="font-weight-semibold">Home</span> -
                            Pengajuan Barang</h4>
                        <a href="#" class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
                    </div>
                </div>

                <div class="breadcrumb-line breadcrumb-line-light header-elements-md-inline">
                    <div class="d-flex">
                        <div class="breadcrumb">
                            <a href="index.html" class="breadcrumb-item"><i class="icon-home2 mr-2"></i> Home</a>
                            <span class="breadcrumb-item active">Pengajuan Barang</span>
                        </div>

                        <a href="#" class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
                    </div>
                </div>
            </div>
            <!-- /page header -->

            <!-- Content area -->
            <div class="content">
                <div class="card">
                    <div class="card-header header-elements-inline">
                        <h5 class="card-title">Pengajuan Barang</h5>
                        <div class="header-elements">
                            <div class="list-icons">
                                <a class="list-icons-item" data-action="collapse"></a>
                                <a class="list-icons-item" data-action="remove"></a>
                            </div>
                        </div>
                    </div>

                    <div class="card-body">
                        <form action="/submission" method="POST" autocomplete="off">
                            <fieldset class="mb-3">
                                <legend class="text-uppercase font-size-sm font-weight-bold">DATA DIRI
                                </legend>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Nama Pengaju</label>
                                    <div class="col-lg-10">
                                        <input type="text" class="form-control" name="name"
                                            placeholder="Masukan Nama Barang">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Alamat</label>
                                    <div class="col-lg-10">
                                        <input type="text" class="form-control" name="address"
                                            placeholder="Masukan Alamat">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Age</label>
                                    <div class="col-lg-10">
                                        <input type="text" class="form-control" name="age" placeholder="Masukan Usia">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Perusahaan</label>
                                    <div class="col-lg-10">
                                        <input type="text" class="form-control" name="company"
                                            placeholder="Masukan Perusahaan">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Jabatan</label>
                                    <div class="col-lg-10">
                                        <input type="text" class="form-control" name="position"
                                            placeholder="Masukan Jabatan">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-form-label col-lg-2">Tanggal Pengajuan</label>
                                    <div class="col-lg-10">
                                        <input type="date" class="form-control" name="date">
                                    </div>
                                </div>

                                <legend class="text-uppercase font-size-sm font-weight-bold">DATA BARANG
                                </legend>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group row">
                                            <label class="col-form-label col-lg-2">Nama Barang</label>
                                            <div class="col-lg-10">
                                                <select class="custom-select" id="item">
                                                    <option value="" selected disabled>Pilih Barang</option>
                                                    <% majors.forEach(function(major) { %>
                                                    <option value="<%= major.id %>"><%= major.name %></option>
                                                    <% }); %>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group row">
                                            <label class="col-form-label col-lg-2">Jumlah</label>
                                            <div class="col-lg-10">
                                                <input type="number" min="1" class="form-control" id="jumlah"
                                                    placeholder="Masukan Stok Barang">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <button type="button" class="btn btn-primary" id="add">TAMBAH</button>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-bordered" id="table-item">
                                        <thead>
                                            <tr>
                                                <th>Nama Barang</th>
                                                <th>Jumlah</th>
                                                <th style="width: 20%;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="static-body">

                                        </tbody>
                                    </table>
                                </div>
                            </fieldset>

                            <div class="text-right">
                                <button type="submit" class="btn btn-primary">Simpan <i
                                        class="icon-paperplane ml-2"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- /content area -->

            <!-- Footer -->
            <% include ../partial/footer %>
            <!-- /footer -->

        </div>
    </div>
    <!-- /page content -->
</body>
<script>
    $(document).ready(function () {
        var counter = 0
        $('#add').on('click', function () {
            var item_id = $('#item').val();
            var item_name = $('#item option:selected').text();
            var quantity = $('#jumlah').val();

            if (item_id != null && quantity != '') {
                counter += 1
                $('<tr>').attr({
                    id: 'tr-dynamic-' + counter
                }).appendTo('#static-body');

                //  td column 1
                $('<td>').attr({
                    id: 'col-1-tr-' + counter
                }).appendTo('#tr-dynamic-' + counter);

                $('<input>').attr({
                    type: 'hidden',
                    class: 'form-control no-border',
                    name: "item",
                    readonly: true,
                    value: item_id
                }).appendTo('#col-1-tr-' + counter);

                $('<input>').attr({
                    type: 'text',
                    class: 'form-control no-border',
                    readonly: true,
                    value: item_name
                }).appendTo('#col-1-tr-' + counter);

                //  td column 2
                $('<td>').attr({
                    id: 'col-2-tr-' + counter
                }).appendTo('#tr-dynamic-' + counter);

                $('<input>').attr({
                    type: 'text',
                    class: 'form-control no-border',
                    name: "quantity",
                    readonly: true,
                    value: quantity
                }).appendTo('#col-2-tr-' + counter);

                //  td column 3
                $('<td>').attr({
                    id: 'col-3-tr-' + counter
                }).appendTo('#tr-dynamic-' + counter);

                $('<button>').attr({
                    type: 'button',
                    class: 'btn btn-danger delete',
                    id: counter
                }).appendTo('#col-3-tr-' + counter).html('HAPUS');
            }

            $("#jumlah").val('')
            $('#item').prop('selectedIndex',0);
        })

        $('#table-item').on('click', '.delete', function () {
            var row_id = $(this).attr('id')
            $('#tr-dynamic-' + row_id).remove();
        });

    })
</script>

</html>